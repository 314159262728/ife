/*!
 * Copyright 2017 by ding
 * @author Ding <ding-js@outlook.com>
 */
var ding2=webpackJsonpding_id_([2],{106:function(t,e,i){"use strict";function r(){var t=p.alarm,e="";t&&t.length>0?t.forEach(function(t,i){e+="<p>闹钟"+(i+1)+" : "+t.time.toLocaleTimeString()+"</p>"}):e="暂无闹钟",f.innerHTML=e}function n(){var t=new Date,e=new Date(t.getTime()-a(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())).getTime(),i=u.map(function(t){return t.value||0}),r=a.apply(void 0,i),n=new Date(e+r);return n}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[60,60,1e3,1],r=i.length,n=0;return t.length>r&&(t=t.slice(0,r)),t.forEach(function(t,e){n+=i.slice(e,r).reduce(function(t,e){return t*e},parseInt(t))}),n}Object.defineProperty(e,"__esModule",{value:!0}),i(256);var o=i(269),s=i(270),l=document.querySelector("#time"),u=Array.prototype.slice.call(l.querySelectorAll("input")),c=document.querySelector("#clock"),d=document.querySelector("#pick-zone"),f=document.querySelector("#alarm-info"),h=document.querySelector("#set-alarm"),m=document.querySelector("#reset-clock"),v=document.querySelector("#set-time");if(window.innerWidth<768){var g=Math.min(window.innerWidth,window.innerHeight)-10;c.width=g,c.height=g}var p=new s.default(c);l.addEventListener("change",function(t){var e=t.target;if("input"===e.tagName.toLowerCase()){var i=e.value,r=+i,n=+e.getAttribute("max");""===i?e.value="":r>n?e.value=""+n:r<0?e.value="":r<10?e.value="0"+r:e.value=""+r}}),v.addEventListener("click",function(t){var e=new Date,i=n();d.value="",p.offset=i.getTime()-e.getTime()}),d.addEventListener("change",function(t){var e=t.target,i=+e.value,r=new Date,n=a(0,r.getTimezoneOffset());u.forEach(function(t){t.value=""}),p.offset=n+a(i)}),h.addEventListener("click",function(t){p.setAlarm(n(),function(t){o.toast("第"+(t+1)+"个闹钟响啦!"),r()}),r(),d.value=""}),m.addEventListener("click",function(){p.offset=0,p.clearAlarm(),r()})},255:function(t,e){},256:function(t,e){},269:function(t,e,i){"use strict";function r(t,e){void 0===e&&(e=5e3);var i=document.createElement("div"),r=document.createTextNode(t);i.classList.add("ding-toast"),i.appendChild(r),document.body.appendChild(i),setTimeout(function(){document.body.removeChild(i)},e)}Object.defineProperty(e,"__esModule",{value:!0}),i(255),e.toast=r},270:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=this;this.draw=function(){var t=i.getCurrentTime(),e=i._ctx,r=i._width,n=i._height,a={x:r/2,y:n/2},o=i._options,s=o.color,l=o.radius,u=.08*l;e.save(),e.clearRect(0,0,r,n),e.strokeStyle=s,e.lineWidth=u,e.beginPath(),e.arc(a.x,a.y,l-u/2,0,2*Math.PI),e.stroke(),e.restore(),e.save();var c=u+.02*l;e.fillStyle=s,e.translate(l,l),e.rotate(-Math.PI/30);for(var d=0;d<60;d++){var f=d%5===0?l/35:l/70,h=l/10,m=-f/2,v=c-l;e.rotate(Math.PI/30),e.beginPath(),e.rect(m,v,f,h),e.fill()}e.setTransform(1,0,0,1,0,0),e.restore(),e.save();var g=l-(u+c+.13*l),p=.18*l;e.fillStyle=s,e.font=p+"px sans-serif",e.textAlign="center",e.textBaseline="middle";for(var d=1;d<=12;d++){var y=d/12*2*Math.PI,b=i.getCoordinate(g,y),m=b.x,v=b.y;e.fillText(""+d,m,v)}e.font=.6*p+"px sans-serif",e.fillText(""+(t.h>12?"P.M":"A.M"),a.x,.3*n),e.restore(),e.save();var _=[{top:.72,bottom:.24,r:t.sR,bottomWidth:.02,topWidth:.01},{top:.6,bottom:.18,r:t.mR,bottomWidth:.06,topWidth:.03},{top:.4,bottom:.13,r:t.hR,bottomWidth:.045,topWidth:.02}],w=Math.tan(60*Math.PI/180),M=Math.tan(30*Math.PI/180);e.fillStyle=s,_.forEach(function(t){var i=l*t.bottom,r=l*t.bottomWidth/2,n=r/w,a=l*t.top,o=l*t.topWidth/2,s=o/M;e.translate(l,l),e.rotate(t.r),e.beginPath(),e.moveTo(0,i),e.lineTo(-r,i-n),e.lineTo(-o,-a+s),e.lineTo(0,-a),e.lineTo(o,-a+s),e.lineTo(r,i-n),e.lineTo(0,i),e.fill(),e.setTransform(1,0,0,1,0,0)}),e.restore(),e.save(),e.fillStyle="#fff",e.beginPath(),e.arc(a.x,a.y,.02*l,0,2*Math.PI),e.fill(),e.restore(),i.triggerAlarm(t.date),window.requestAnimationFrame(i.draw)},this._canvas=t,this._ctx=t.getContext("2d"),this._width=+t.getAttribute("width")||300,this._height=+t.getAttribute("height")||300;var r={radius:Math.min(this._width,this._height)/2,color:"#9b9b9b"};e&&e.radius&&(e.radius>r.radius||e.radius<=1)&&(e.radius=r.radius),Object.assign(r,e),this._radius=r.radius,this._options=r,window.requestAnimationFrame(this.draw)}return t.prototype.getCoordinate=function(t,e){var i=this._radius;return{x:i+t*Math.sin(e),y:i-t*Math.cos(e)}},t.prototype.getCurrentTime=function(){var t,e=new Date;t=this._timeOffset?new Date(e.getTime()+this._timeOffset):e;var i=[t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],r=i[0],n=i[1],a=i[2],o=i[3],s=a+o/1e3,l=n+s/60,u=r+l/60,c=[u/12,l/60,s/60].map(function(t){return 2*t*Math.PI}),d=c[0],f=c[1],h=c[2];return{hR:d,mR:f,sR:h,date:t,h:r,s:a,m:n}},t.prototype.triggerAlarm=function(t){var e=this,i=this._alarm;if(i&&!(i.length<=0)){var r=[];i.forEach(function(e,i){Math.abs(t.getTime()-e.time.getTime())<100&&r.push({index:i,alarm:e})}),r.forEach(function(t,i){var r=t.index-i;e._alarm.splice(r,r+1),t.alarm.cb(i)})}},t.prototype.setAlarm=function(t,e){this._alarm||(this._alarm=[]),this._alarm.push({time:t,cb:e})},t.prototype.clearAlarm=function(){this._alarm=[]},Object.defineProperty(t.prototype,"offset",{set:function(t){this._timeOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alarm",{get:function(){return this._alarm},enumerable:!0,configurable:!0}),t}();e.default=r},275:function(t,e,i){i(106),t.exports=i(28)}},[275]);