/*!
 * Copyright 2017 by Ding
 * @author Ding <ding-js@outlook.com>
 */
var ding4=webpackJsonpding_id_([4],{113:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o(263);var n=o(279),i=document.querySelector("#snake-wrapper");new n.Snake(i,{width:600,height:600})},263:function(e,t){},279:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.empty=0]="empty",e[e.wall=1]="wall",e[e.body=2]="body",e[e.head=3]="head",e[e.footer=4]="footer",e[e.food=5]="food"}(n||(n={}));var i;!function(e){e[e.left=0]="left",e[e.right=1]="right",e[e.up=2]="up",e[e.down=3]="down"}(i||(i={}));var r=function(){function e(e,t){var o=this;this._boxes=[],this._snakeDirection=i.right,this._keys=[],this._boxTypes=(p={},p[n.empty]={background:"#f5f5f5"},p[n.wall]={},p[n.head]={background:"red"},p[n.body]={background:"green"},p[n.footer]={background:"green"},p[n.food]={background:"yellow"},p),this._direction=(f={},f[i.left]={x:-1,y:0,keyCode:[65,37],opposite:i.right},f[i.right]={x:1,y:0,keyCode:[68,39],opposite:i.left},f[i.up]={x:0,y:-1,keyCode:[87,38],opposite:i.down},f[i.down]={x:0,y:1,keyCode:[83,40],opposite:i.up},f),this.update=function(){var e=o._keys,t=e.length;if(console.log(o._keys),t>0){for(var i=t-1;i>=0;i--){var r=e[i];r!==o._snakeDirection&&r!==o._direction[o._snakeDirection].opposite&&(o._snakeDirection=r)}o._keys=[]}var s=o._snake,a=o._direction[o._snakeDirection],h=o._content,d=s[0],c=s[s.length-1],p=d.xIndex+a.x,f=d.yIndex+a.y,u=o.getBox(p,f);if(u&&p>=0&&p<h.colums&&f>=0&&f<h.rows){switch(u.type){case n.empty:c.type=n.empty,s.pop();break;case n.food:o.createAFood();break;default:return}s.unshift(u),s.forEach(function(e){e.type=n.body}),s[0].type=n.head,s[s.length-1].type=n.footer,o.draw()}else console.info("Game over!"," : ","撞墙")};var r={width:e.offsetWidth,height:e.offsetHeight,sideLength:14};Object.assign(r,t);var s=r.sideLength,a=r.width%s/2,h=r.height%s/2,d=r.width-2*h,c=r.height-2*a;this._content={x:h,y:a,width:d,height:c,rows:d/s,colums:c/s},this._container=e,this._options=r,this.init();var p,f}return e.prototype.init=function(){var e=this,t=this._options,o=document.createElement("canvas"),i=o.getContext("2d"),r=this._content,s=t.sideLength;Object.assign(o,{width:t.width,height:t.height}),this._canvas=o,this._ctx=i,this._container.appendChild(o);for(var a=0;a<r.colums;a++){for(var h=[],d=0;d<r.rows;d++)h.push({x:r.x+a*s,y:r.y+d*s,xIndex:a,yIndex:d,type:n.empty});this._boxes.push(h)}document.addEventListener("keydown",function(t){var o=e._direction,n=t.keyCode;for(var i in o)o[i].keyCode.indexOf(n)>-1&&(t.preventDefault(),e._keys.push(+i))}),this.start()},e.prototype.getBox=function(e,t){var o=this._boxes,n=o[e];if(n)return n[t]},e.prototype.start=function(){var e=this,t=[6,5,4,3].map(function(t){return e.getBox(t,4)});this._snake=t,this.createAFood(),setInterval(this.update,300)},e.prototype.createAFood=function(){var e=this._content,t=Math.floor(Math.random()*e.colums),o=Math.floor(Math.random()*e.rows),i=this.getBox(t,o);return i.type!==n.empty?this.createAFood():(i.type=n.food,i)},e.prototype.draw=function(){var e=this._options,t=this._ctx,o=this._boxTypes,n=e.sideLength;t.clearRect(0,0,e.width,e.height),t.save(),this._boxes.forEach(function(e){e.forEach(function(e){var i=o[e.type];i.background&&(t.fillStyle=i.background,t.fillRect(e.x,e.y,n,n)),i.render&&i.render(t,e.x,e.y,n)})})},e}();t.Snake=r},286:function(e,t,o){o(18),e.exports=o(113)}},[286]);